<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OJINGEO PROJECT</title>

<link rel="icon" type="image/png" href="favicon.png">
<link rel="apple-touch-icon" href="favicon.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@font-face {
  font-family: "SquidFont";
  src: url("fonts/squid.ttf") format("truetype");
  font-display: swap;
}

* {
  font-family: "SquidFont" !important;
  box-sizing: border-box;
}

body {
  margin: 0;
  background: #0f0f0f;
  color: #fff;
  text-align: center;
}

/* LOADING */
#loadingScreen {
  position: fixed;
  inset: 0;
  background: #0f0f0f;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  z-index: 9999;
  transition: opacity 1.5s ease;
}

/* HEADER */
header {
  padding: 80px 20px 60px;
  background: radial-gradient(circle at top, #1a1a1a, #000);
  position: relative;
}

header img {
  width: 300px;
  margin-bottom: 20px;
}

.top-right-buttons {
  position: absolute;
  top: 20px;
  right: 20px;
  display: flex;
  flex-direction: row;
  gap: 10px;
  flex-wrap: wrap;
}

.btn {
  padding: 14px 28px;
  background: #ff3b3b;
  border: none;
  color: #fff;
  cursor: pointer;
  border-radius: 6px;
  margin: 6px;
  font-size: 16px;
}

.btn.secondary {
  background: #222;
  border: 1px solid #444;
}

/* SECTIONS + FADE */
section {
  padding: 80px 20px;
  max-width: 1200px; /* slightly bigger shop width */
  margin: auto;
  opacity: 1;
  transition: opacity 1.5s ease;
}

.hidden {
  opacity: 0;
  pointer-events: none;
  position: absolute;
  left: -9999px;
}

/* CAROUSEL */
.carousel {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 30px;
  margin-top: 40px;
}

.arrow {
  font-size: 42px;
  background: none;
  border: none;
  color: #ff3b3b;
  cursor: pointer;
}

.card {
  background: #141414;
  border-radius: 10px;
  padding: 25px;
  border: 1px solid #222;
}

.card img {
  width: 100%;
  border-radius: 6px;
  margin-bottom: 12px;
}

/* GAME MODES */
.game-modes {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-top: 40px;
  text-align: left;
}

/* MEDIA */
.media-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px,1fr));
  gap: 20px;
  margin-top: 40px;
}

iframe {
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 10px;
  border: none;
}

/* SHOP */
.shop-info {
  background: #141414;
  border: 1px solid #222;
  border-radius: 6px;
  padding: 8px 12px; /* smaller */
  margin-bottom: 10px;
  text-align: left;
  font-size: 14px;
}

.revives {
  color: #ff69b4; /* pink triangle */
  font-weight: bold;
}

.shop-tabs {
  display: flex;
  justify-content: flex-start;
  gap: 12px;
  margin-bottom: 20px;
}

.shop-tab {
  padding: 10px 20px;
  border: 1px solid #444;
  border-radius: 6px;
  cursor: pointer;
  background: #111;
  color: #fff;
}

.shop-tab.active {
  background: #ff3b3b;
}

.shop-content {
  display: none;
}

.shop-content.active {
  display: block;
}

.skin-grid {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  padding-bottom: 12px;
}

.skin-card {
  min-width: 180px;
  background: #141414;
  border: 1px solid #222;
  border-radius: 8px;
  text-align: center;
  position: relative;
  padding: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.skin-card img {
  width: 100%;
  border-radius: 6px;
  margin-bottom: 8px;
}

.skin-rarity {
  font-weight: bold;
  font-size: 12px;
}

.collab-badge {
  position: absolute;
  top: 6px;
  right: 6px;
  background: #ff3b3b;
  color: #fff;
  font-size: 10px;
  padding: 2px 4px;
  border-radius: 4px;
}

/* INPUTS */
input, select {
  padding: 8px;
  margin: 6px;
  border-radius: 4px;
  border: none;
}

/* FOOTER */
footer {
  padding: 40px 20px;
  background: #000;
  opacity: 0.6;
}
</style>
</head>

<body>

<div id="loadingScreen">LOADING…</div>
<audio id="clickSound" src="sounds/click.mp3" preload="auto"></audio>

<header>
  <div class="top-right-buttons">
    <button class="btn secondary" onclick="switchPage('home')">Home</button>
    <button class="btn secondary" onclick="switchPage('manual')">Manual</button>
    <button class="btn secondary" onclick="switchPage('media')">Media</button>
    <button class="btn secondary" onclick="switchPage('shop')">Shop</button>
    <button class="btn secondary" onclick="switchPage('account')">Account</button>
    <a class="btn" href="https://discord.gg/B2XjJYdwGM" target="_blank">Join Discord</a>
  </div>

  <img src="images/logo.png">
  <p>Survive twisted childhood games. One winner.</p>

  <a class="btn" href="https://satoshiteam.itch.io/ojingeo-project" target="_blank">
    Play on itch.io
  </a>
</header>

<!-- HOME -->
<section id="home">
  <h2>Games (Season 1–3)</h2>

  <div class="carousel">
    <button class="arrow" onclick="prevGame()">◀</button>
    <div class="card">
      <img id="gameImg">
      <h3 id="gameTitle"></h3>
      <p id="gameDesc"></p>
    </div>
    <button class="arrow" onclick="nextGame()">▶</button>
  </div>

  <h2 style="margin-top:80px;">Game Modes</h2>
  <div class="game-modes">
    <div class="card"><h3>Frontman Mode</h3><p>Control the games. Enforce the rules.</p></div>
    <div class="card"><h3>Guard Mode</h3><p>Serve the organization. Eliminate players.</p></div>
    <div class="card"><h3>Multiplayer Mode</h3><p>Up to 100 players worldwide.</p></div>
    <div class="card"><h3>Jun-ho Files</h3><p>Investigate the island.</p></div>
  </div>
</section>

<!-- MANUAL -->
<section id="manual" class="hidden">
  <h2>Manual</h2>
  <p>Follow the rules. Fail and you are eliminated.</p>
</section>

<!-- MEDIA -->
<section id="media" class="hidden">
  <h2>Media</h2>
  <div class="media-grid">
    <iframe src="https://www.youtube.com/embed/sIyS_o_70-A"></iframe>
    <iframe src="https://www.youtube.com/embed/fsFGFWvBnCw"></iframe>
  </div>
</section>

<!-- SHOP -->
<section id="shop" class="hidden">
  <h2>Shop</h2>
  <p id="shopNotice">Login required to purchase items.</p>

  <div class="shop-info">
    <div>₩: <span id="wonAmount">0</span></div>
    <div class="revives">△ <span id="revivesAmount">0</span></div>
  </div>

  <div>
    <label for="langSelect">Language:</label>
    <select id="langSelect" onchange="changeLanguage()">
      <option value="en">English</option>
      <option value="fr">French</option>
      <option value="es">Spanish</option>
      <option value="ar">Arabic</option>
      <option value="ru">Russian</option>
      <option value="ko">Korean</option>
    </select>
  </div>

  <div class="shop-tabs">
    <div class="shop-tab active" onclick="switchShopTab('skins', this)">Skins</div>
    <div class="shop-tab" onclick="switchShopTab('emotes', this)">Emotes</div>
    <div class="shop-tab" onclick="switchShopTab('powerups', this)">Power-Ups</div>
    <div class="shop-tab" onclick="switchShopTab('revives', this)">Revives</div>
  </div>

  <!-- SKINS -->
  <div id="skins" class="shop-content active">
    <input type="text" id="skinSearch" placeholder="Search skins..." oninput="renderSkins()">
    <select id="rarityFilter" onchange="renderSkins()">
      <option value="">All rarities</option>
      <option value="common">Common</option>
      <option value="rare">Rare</option>
      <option value="superrare">Super Rare</option>
      <option value="special">Special</option>
      <option value="exotic">Exotic</option>
      <option value="mythical">Mythical</option>
      <option value="wild">Wild</option>
    </select>
    <select id="collabFilter" onchange="renderSkins()">
      <option value="">All</option>
      <option value="true">Collab Only</option>
    </select>
    <div class="skin-grid" id="skinGrid"></div>
  </div>

  <!-- EMOTES -->
  <div id="emotes" class="shop-content">
    <div class="skin-grid" id="emotesGrid"></div>
  </div>

  <!-- POWER-UPS -->
  <div id="powerups" class="shop-content">
    <div class="skin-grid" id="powerUpsGrid"></div>
  </div>

  <!-- REVIVES -->
  <div id="revives" class="shop-content">
    <div class="skin-grid" id="revivesGrid"></div>
  </div>
</section>

<!-- ACCOUNT -->
<section id="account" class="hidden">

  <div id="authUI">
    <h2>Account</h2>
    <input id="email" placeholder="Email">
    <input id="password" type="password"><br>
    <button class="btn" onclick="login()">Login</button>

    <hr style="opacity:.2; margin:40px 0;">

    <input id="regEmail" placeholder="Email">
    <input id="regPassword" type="password"><br>
    <button class="btn" onclick="register()">Create Account</button>

    <div class="card" style="margin-top:40px;">
      <h3>Why create & link an account?</h3>
      <p>• Save progress<br>• Unlock shop items<br>• Sync with the game<br>• Access exclusive content</p>
    </div>
  </div>

  <div id="profileUI" class="hidden">
    <h2>Your Profile</h2>
    <p>Progress: 0%</p>
    <button class="btn">Link Account to Game</button>

    <div class="card" style="margin-top:30px;">
      <h3>Account Benefits</h3>
      <p>Progress syncing, cosmetics, rewards, early access.</p>
    </div>

    <button class="btn secondary" onclick="logout()">Logout</button>
  </div>
</section>

<footer>© 2026 SATOSHI TEAM — Non-profit fan project</footer>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const supabase = createClient(
  "https://rqshkyiggycfypilcmzk.supabase.co",
  "sb_publishable_Tn7XLKoh21eS673C0oZDwQ_5NgLMthf"
);

window.login = async () => {
  const { error } = await supabase.auth.signInWithPassword({ email: email.value, password: password.value });
  if (!error) location.reload();
};

window.register = async () => {
  await supabase.auth.signUp({ email: regEmail.value, password: regPassword.value });
  alert("Verify your email.");
};

window.logout = async () => {
  await supabase.auth.signOut();
  location.reload();
};

const { data } = await supabase.auth.getSession();
if (data.session) {
  authUI.classList.add("hidden");
  profileUI.classList.remove("hidden");
  shopGrid.classList.remove("locked");
  shopNotice.style.display = "none";
} else {
  shopGrid.classList.add("locked");
}
</script>

<script>
/* SFX */
const clickSound = document.getElementById("clickSound");
document.addEventListener("click", e => {
  if (e.target.closest(".btn")) {
    clickSound.currentTime = 0;
    clickSound.play().catch(()=>{});
  }
});

/* FADE PAGE SWITCH */
function switchPage(id) {
  document.querySelectorAll("section").forEach(s => s.classList.add("hidden"));
  setTimeout(()=>document.getElementById(id).classList.remove("hidden"),10);
}

/* GAMES */
const games=[
{img:"images/shot1.png",title:"Red Light, Green Light",desc:"If they catch you moving, you're going to be killed!"},
{img:"images/shot2.png",title:"Dalgona",desc:"Carefully carve out the shape... Or be eliminated..."},
{img:"images/shot3.png",title:"Tug of War",desc:"Tug of War needs more than just raw strength..."},
{img:"images/shot4.png",title:"Marbles",desc:"We're Gganbu, aren't we?"},
{img:"images/shot5.png",title:"Glass Bridge",desc:"One wrong step, and you're eliminated!"},
{img:"images/shot6.png",title:"Squid Game",desc:"Only one can survive..."},
{img:"images/shot7.png",title:"Pentathalon",desc:"A game consisted of five children's mini-games: Ddakji, Biseokchigi, Gonggi, Paengi, and Jegi..."},
{img:"images/shot8.png",title:"Mingle",desc:"Work as a team & find a room..."},
{img:"images/shot9.png",title:"Hide & Seek",desc:"Is it like the kids version? Do we just have to find them and then they're out?."},
{img:"images/shot10.png",title:"Jump Rope",desc:"One your off... You won't come back..."},
{img:"images/shot11.png",title:"Sky Squid Game",desc:"In the final game, all of you will get to choose which players will be eliminated..."}
];

let index=0;
const gameImg=document.getElementById("gameImg");
const gameTitle=document.getElementById("gameTitle");
const gameDesc=document.getElementById("gameDesc");

function renderGame(){
  gameImg.src=games[index].img;
  gameTitle.textContent=games[index].title;
  gameDesc.textContent=games[index].desc;
}
function nextGame(){index=(index+1)%games.length;renderGame();}
function prevGame(){index=(index-1+games.length)%games.length;renderGame();}
renderGame();

/* LOAD */
window.addEventListener("load",()=>{
  loadingScreen.style.opacity=0;
  setTimeout(()=>loadingScreen.remove(),1500);
});

/* SHOP DATA */
const skinsData=[
{name:"Seong Gi-hun",rarity:"common",color:"#1E90FF",collab:false,price:100,img:"images/skin1.png"},
{name:"Cho Sang-woo",rarity:"common",color:"#1E90FF",collab:false,price:120,img:"images/skin2.png"},
{name:"Kang Sae-byeok",rarity:"rare",color:"#FF0000",collab:false,price:200,img:"images/skin3.png"},
{name:"Abdul Ali",rarity:"common",color:"#1E90FF",collab:false,price:110,img:"images/skin4.png"},
{name:"Oh Il-nam",rarity:"special",color:"#50C878",collab:false,price:500,img:"images/skin5.png"},
{name:"Han Mi-nyeo",rarity:"rare",color:"#FF0000",collab:false,price:250,img:"images/skin6.png"},
{name:"Jang Deok-su",rarity:"superrare",color:"#FF69B4",collab:false,price:400,img:"images/skin7.png"},
{name:"Hwang Jun-ho",rarity:"mythical",color:"#800080",collab:false,price:1000,img:"images/skin8.png"},
{name:"Movie Shadow",rarity:"exotic",color:"#D4AF37",collab:true,price:1000,img:"images/skin9.png"},
{name:"SpongeBob",rarity:"wild",color:"linear-gradient(45deg,#FF0000,#FF7F00,#FFFF00,#00FF00,#0000FF,#4B0082,#8F00FF)",collab:true,price:2000,img:"images/skin10.png"}
];

const emotesData=[
{name:"Dance 1",rarity:"common"},
{name:"Dance 2",rarity:"rare"},
{name:"Dance 3",rarity:"superrare"},
{name:"Dance 4",rarity:"special"}
];

const powerUpsData=[
{name:"Speed Boost"},
{name:"Shield"},
{name:"Double XP"}
];

const revivesData=[
{name:"1 Revive"},
{name:"Pack of 5 Revives"},
{name:"Pack of 10 Revives"}
];

/* SHOP FUNCTIONS */
function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1);}

function renderSkins(){
  const grid=document.getElementById("skinGrid");
  grid.innerHTML="";
  const search=document.getElementById("skinSearch").value.toLowerCase();
  const rarity=document.getElementById("rarityFilter").value;
  const collab=document.getElementById("collabFilter").value;
  skinsData.forEach(skin=>{
    if(skin.name.toLowerCase().includes(search) && 
       (rarity==="" || skin.rarity===rarity) &&
       (collab==="" || skin.collab.toString()===collab)){
      const div=document.createElement("div");
      div.className="skin-card";
      div.style.background=skin.color;
      div.innerHTML=`
        <img src="${skin.img}" alt="${skin.name}">
        <div>${skin.name}</div>
        <span class="skin-rarity">${capitalize(skin.rarity)}</span>
        <div>₩${skin.price}</div>
      `;
      if(skin.collab){
        const badge=document.createElement("div");
        badge.className="collab-badge";
        badge.textContent="Collab";
        div.appendChild(badge);
      }
      grid.appendChild(div);
    }
  });
}

function renderEmotes(){
  const grid=document.getElementById("emotesGrid");
  grid.innerHTML="";
  emotesData.forEach(e=>{
    const div=document.createElement("div");
    div.className="skin-card";
    div.innerHTML=`${e.name}<br><span class="skin-rarity">${capitalize(e.rarity)}</span>`;
    grid.appendChild(div);
  });
}

function renderPowerUps(){
  const grid=document.getElementById("powerUpsGrid");
  grid.innerHTML="";
  powerUpsData.forEach(p=>{
    const div=document.createElement("div");
    div.className="skin-card";
    div.innerText=p.name;
    grid.appendChild(div);
  });
}

function renderRevives(){
  const grid=document.getElementById("revivesGrid");
  grid.innerHTML="";
  revivesData.forEach(r=>{
    const div=document.createElement("div");
    div.className="skin-card";
    div.innerText=r.name;
    grid.appendChild(div);
  });
}

function switchShopTab(id, tab){
  document.querySelectorAll(".shop-tab").forEach(t=>t.classList.remove("active"));
  tab.classList.add("active");
  document.querySelectorAll(".shop-content").forEach(c=>c.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function changeLanguage(){
  const lang = document.getElementById("langSelect").value;
  alert("Language switched to: " + lang);
}

/* INITIAL RENDER */
renderSkins();
renderEmotes();
renderPowerUps();
renderRevives();
</script>

</body>
</html>
